<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
canvas {
    border:1px solid #d3d3d3;
    background-color: #f1f1f1;
}
</style>
</head>
<body onload="startGame()">

  <button onclick="playerX = playerX - 10;"><</button>
  <button onclick="playerX = playerX + 10;">></button>
  <button onclick="playerY = playerY + 10;">^</button>
  <button onclick="playerY = playerY - 10;">V</button>

<script>

var playerX = -10;
var playerY = -10;
var playerZ = -10;

function calculatePos(realposX, realposY, realposZ){
  
  realposX = realposX
  realposY = realposY 
  realposZ = realposZ

  console.log("PLAYERX " + playerX + " REALPOSX " + realposX[0]);

xDistanceP1 = playerX - realposX[0]
//if (xDistanceP1 < 0){
 // xDistanceP1 = -1 * xDistanceP1
//}

xDistanceP2 = playerX - realposX[1]
//if (xDistanceP2 < 0){
 // xDistanceP2 = -1 * xDistanceP2
//}

xDistanceP3 = playerX - realposX[2]
//if (xDistanceP3 < 0){
  //xDistanceP3 = -1 * xDistanceP3
//}

xDistanceP4 = playerX - realposX[3]
//if (xDistanceP4 < 0){
  //xDistanceP4 = -1 * xDistanceP4
//}





yDistanceP1 = playerY - realposY[0]
if (yDistanceP1 < 0){
  yDistanceP1 = -1 * yDistanceP1;
}

yDistanceP2 = playerY - realposY[1]
if (yDistanceP2 < 0){
  yDistanceP2 = -1 * yDistanceP2;
}

yDistanceP3 = playerY - realposY[2]
if (yDistanceP3 < 0){
  yDistanceP3 = -1 * yDistanceP3;
}

yDistanceP4 = playerY - realposY[3]
if (yDistanceP4 < 0){
  yDistanceP4 = -1 * yDistanceP4;
}




zDistanceP1 = playerZ - realposZ[0]
///if (zDistanceP1 < 0){
  //zDistanceP1 = -1 * zDistanceP1
//}

zDistanceP2 = playerZ - realposZ[1]
//if (zDistanceP2 < 0){
 // zDistanceP2 = -1 * zDistanceP2
//}

zDistanceP3 = playerZ - realposZ[2]
//if (zDistanceP3 < 0){
 // zDistanceP3 = -1 * zDistanceP3
//}

zDistanceP4 = playerZ - realposZ[3]
//if (zDistanceP4 < 0){
//  zDistanceP4 = -1 * zDistanceP4
//}

console.log("xDIST " + xDistanceP1);
console.log("yDIST " + yDistanceP1);
console.log("zDIST " + zDistanceP1);

// POINT 1

horizon1 = myGameArea.canvas.width / 2 + Math.atan(xDistanceP1 / yDistanceP1) * myGameArea.canvas.width;



vertical1 = myGameArea.canvas.height / 2 + Math.atan(zDistanceP1 / yDistanceP1) * myGameArea.canvas.height;




// POINT 2

horizon2 = myGameArea.canvas.width / 2 + Math.atan(xDistanceP2 / yDistanceP2) * myGameArea.canvas.width;;




vertical2 = myGameArea.canvas.height / 2 + Math.atan(zDistanceP2 / yDistanceP2) * myGameArea.canvas.height;





// POINT 3

horizon3 = myGameArea.canvas.width / 2 + Math.atan(xDistanceP3 / yDistanceP3) * myGameArea.canvas.width;



vertical3 = myGameArea.canvas.height / 2 + Math.atan(zDistanceP3 / yDistanceP3) * myGameArea.canvas.height;




// POINT 4
horizon4 = myGameArea.canvas.width / 2 + Math.atan(xDistanceP4 / yDistanceP4) * myGameArea.canvas.width;




vertical4 = myGameArea.canvas.height / 2 + Math.atan(zDistanceP4 / yDistanceP4) * myGameArea.canvas.height;














// TABLEAU DE PROPORTIONNALITE
// ANGLE / 90 ET COORDONNE / myGameArea.canvas.width



console.log(horizon1);

    this.x1 =  horizon1; // horizon1 / 90 est un peu comme le coefficient de proportionnalité
// COORDONNE DE L ORIGINE DU REPERE A BON SENS PAR RAPPORT AU ORIGINE GRAPHIQUE (EN HAUT A GAUCHE) MOINS COORD POINT SI NEG ET PLUS SI POSTIV
    this.y1 = vertical1;

    this.x2 = horizon2;
    this.y2 =  vertical2;

    this.x3 = horizon3;
    this.y3 = vertical3;

    this.x4 = horizon4;
    this.y4 = vertical4;

  

console.log("x1 = " + this.x1 + " x2 = " + this.x2 + " x3 = " + this.x3 + " x4 = " + this.x4);
console.log("y1 = " + this.y1 + " y2 = " + this.y2 + " y3 = " + this.y3 + " y4 = " + this.y4);
ctx = myGameArea.context;
    ctx.beginPath();
      ctx.moveTo(this.x1, this.y1); // Déplacez-vous au premier point
      ctx.lineTo(this.x2, this.y2); // Tracez une ligne vers le deuxième point
 
      ctx.moveTo(this.x2, this.y2);
      ctx.lineTo(this.x3, this.y3); // Tracez une ligne vers le troisième point
 
      ctx.moveTo(this.x3, this.y3);  
      ctx.lineTo(this.x4, this.y4); // Tracez une ligne vers le quatrième point
      
      ctx.moveTo(this.x4, this.y4);  
      ctx.lineTo(this.x1, this.y1); // Tracez une ligne vers le quatrième point
      
      ctx.closePath(); // Fermez le chemin
      ctx.fillStyle = "rgba(255, 0, 0, 0.5)"; // Couleur de remplissage (rouge transparent)
      ctx.fill(); // Remplissez la forme
      ctx.strokeStyle = "blue"; // Couleur du contour (bleu)
      ctx.lineWidth = 2; // Épaisseur du contour
      ctx.stroke(); // Tracez le contour

}


var myGamePiece;

function startGame() {
    myGameArea.start();
   
}

var myGameArea = {
    canvas : document.createElement("canvas"),
    start : function() {
        this.canvas.width = 480;
        this.canvas.height = 270;
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
        this.interval = setInterval(updateGameArea, 20);
    },
    clear : function() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }
}


  function updateGameArea() {
    myGameArea.clear();
    calculatePos([-20, -10, 0, 10], [10, 10, 10, 10], [10, 10, 20, 20]);

}



</script>

<p>We have added a component to our game, a red square!</p>

</body>
</html>
